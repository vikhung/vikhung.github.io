<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <meta charset="utf-8">
    <title>Vik Blog</title>
  </head>
  <body>
    <div class="container">
      <!--Bootstrape col 預設為12格-->
      <div class="row" >
        <div class="col py-3 border bg-light">
          20200108
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          1.建立BLOG步驟
        </div>
        <div class="col py-3 border bg-light">
          (1)登入Blog，並且建立新Repository，名稱為vikhung.github.io<BR>
          (2)新增index.html<BR>
          (3)測試，https://vikhung.github.io<BR>
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          2.PC端版控
        </div>
        <div class="col py-3 border bg-light">
          (1)下載Github Desktop<BR>
          (2)於Github上將vikhung.github.io Repository Clone至PC<BR>
          (3)此時，可於PC端之Github Desktop進行版控<BR>
          (4)測試，開啟編輯器修改index.html檔案，並於Github Desktop將檔案先Commit，再Fetch Orig<BR>
          (5)於Github server確認。版本是否已更新至Server端。
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          3.Visual Studio Code編輯及版控
        </div>
        <div class="col py-3 border bg-light">
          (1)於Github Desktop中開啟"Open in Visual Studio Code"，系統會開啟Visual Studio Code<BR>
          (2)在"Explore"中修改index.html<BR>
          (3)在"Source Control"會出現檔案異動符號<BR>
          (4)在"Source Control"將檔案先stage change(點選+號)(還不太會用，這有點像是先少量儲存？)<BR>
          (5)每次少少異動後，可以陸續stage change<BR>
          (6)在"Source Control"執行Commit並輸入註解(點選打勾符號)(此時尚未Push到Server)<BR>
          (7)在"Source Control"執行Push(開啟...，並點選Push)<BR>
          (8)測試，於Github server確認。版本是否已更新至Server端。<BR>
        </div>
      </div>
      <div class="row" >
        <div class="col py-3 border bg-light">
          20200111
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          1.練習Bootstrape 4
        </div>
        <div class="col py-3 border bg-light">
          (1)連結https://getbootstrap.com/，按下Get Started
          (2)參考範例，逐一新增link、script、meta...等基礎的html結構<BR>
          (3)測試，https://vikhung.github.io<BR>
        </div>
      </div>
      <div class="row" >
        <div class="col py-3 border bg-light">
          20200121
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          安裝Chrome OS from ClounReady<BR>
          如果家裡有舊NB，可以用以下方法安裝ChromOS
        </div>
        <div class="col py-3 border bg-light">
          一、製作USB開機碟<BR>
          (1)下載CloudReady For personal, home use版本的ChromOS安裝工具(https://www.neverware.com/#get-cloudready)<BR>
          (2)點選Get The Free Version，再點選Download USB Maker，下載可製作USB開機碟的安裝工具(cloudready-usb-maker.exe)<BR>
          (3)執行cloudready-usb-maker.exe開始製作開機USB(基本上就是一直按Next<BR>
          二、開機<BR>
          (1)USB插入後開機，先選擇語系後、設定網路(之前安裝經驗，因為我的NB網卡找不到Driver了(懶的找)，但補上一支WIFI USB碟後也可以)<BR>
             PS.如果沒有網路，先跳過網路安裝步驟，後續再插上WIFI網卡也行<BR>
          (2)正式登入後，可以點選右下角功能，執行Install OS。此時會開始將ChromOS安裝到硬碟(約20分鐘)<BR>
          (3)拔掉USB重新開機，改由硬碟開機，這時候可以像操作Android一般，於設定功能中，將Linux安裝完成，這又就可以使用Google包裝的Linux版本<BR>
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          一、Chrome OS Linux安裝OpenJDK<BR>
          二、Chroms OS Linux安裝mongoDB<BR>
          三、Ubutun 安裝mongoDB<BR>
        </div>
        <div class="col py-3 border bg-light">
          一、OpenJDK<BR>
          (1)sudo apt-get update<BR>
          (2)sudo apt-get upgrade<BR>
          (3)sudo apt-get install openjdk-8-jdk<BR>
          二、mongoDB<BR>
          (1)以下是針對ChromOS的Linux進行安裝<BR>
          (2)主要安裝程序是參考https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/<BR>
          (3)指令：apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927<BR>
          (4)指令：echo "deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/4.2 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.2.list<BR>
          (5)指令：apt-get update<BR>
          (6)指令：apt-get install -y mongodb<BR>
             PS.官方文件ubuntu步驟是apt-get install -y mongodb，但我安裝失敗，改成apt-get install -y mongo竟意外成功了，但是版本似乎是3.2.11版，但先能用再說<BR>
          (7)指令：啟動服務：sudo service mongodb start<BR>
          (8)指令：停止服務：sudo service mongodb stop<BR>
          (9)指令：服務狀態：sudo service mongo status<BR> 
             PS.官方文件是sudo service mongoddb start，但是這裡必須用mongo<BR>
          (10)測試：執行mongo，接著執行db，如果有看到test，就成功了<BR>
          ...<BR>
          QA：到底ChromOS是基於哪種安裝？因為官方文件只有針對主流Linux提供安裝程序，所以裝起來版本不太一樣<BR>
          後來檢查版本看來是3.12版的<BR>
          三、mongoDB(Ubutun)<BR>
          (1)完全依照官方文件即可，一模一樣<BR>
        </div>
      </div>
      <div class="row" >
        <div class="col py-3 border bg-light">
          20200124
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          mongoDB(Ubutun) study<BR>
          Install<BR>
        </div>
        <div class="col py-3 border bg-light">
          1.Directories<BR>
          安裝完後兩個重要位置，/var/lib/mongodb、/var/log/mongodb，前者放置資料，後者放置log，如果有新增使用者帳號，也要調整這兩個目錄權限。<BR>
          By default, MongoDB runs using the mongodb user account. If you change the user that runs the MongoDB process, you must also modify the permission to the data and log directories to give this user access to these directories.<BR>
          2.Configuration File<BR>
          The official MongoDB package includes a configuration file (/etc/mongod.conf). These settings (such as the data directory and log directory specifications) take effect upon startup. That is, if you change the configuration file while the MongoDB instance is running, you must restart the instance for the changes to take effect.<BR>
          3.Procedure<BR>
          sudo service mongod start<BR>
          sudo service mongod status<BR>
          sudo service mongod stop<BR>
          sudo service mongod restart<BR>
          mongo<BR>
        </div>
      </div>
      <div class="row" >
        <div class="col py-3 border bg-light">
          20200127
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          mongoDB(Ubutun) study<BR>
          連線方式<BR>
        </div>
        <div class="col py-3 border bg-light">
          這幾天稍微玩了一下mongodb，本機操作都沒問題，不過只要遠端就會失敗，找了一下資料，發現應該是要將實際IP寫入設定檔中。<BR>
          (一)參考文件：https://docs.mongodb.com/manual/reference/configuration-options/#net.bindIp<BR>
          (二)設定檔位置(記得先備份)<BR>
          先確認本機IP ==>ifconfig<BR>
          1.Windows：(mongo安裝位置)\Server\4.0\bin\mongod.cfg<BR>
          2.ubutun：/etc/mongod.conf<BR>
          (三)修改設定檔<BR>
          1.sudo gedit /etc/mongod.conf<BR>
          2.修改:bindIp:127.0.0.1 ==> bindIp:127.0.0.1,192.168.0.34<BR>
          3.存檔離開<BR>
          4.啟動mongodb<BR>
          5.sudo service mongod start<BR>
          (四)確認使否有效<BR>
          可透過log看是否有listen指定的IP，log檔位置<BR>
          (1)Windows：(mongo安裝位置)\Server\4.0\log\mongod.log<BR>
          (2)ubutun：/var/log/mongodb/mongod.log<BR>
          (四)連實際線測試<BR>
          開始Windows版的Mongodb Compass連線測試工具，確認已可連接。<BR>
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          mongoDB(Ubutun) study<BR>
          Replication<BR>
        </div>
        <div class="col py-3 border bg-light">
          參考資料：https://docs.mongodb.com/manual/replication/<BR>
          Replication模式中，如果Second Host沒有接收到Primary Host heartbeat，預設時間為10秒，會重新投票(Elect)選擇新主機作為Primary Host<BR>
          一.Replica Set Members<BR>
            https://docs.mongodb.com/manual/core/replica-set-members/<BR>
            (二)Replica Set Secondary Members(三種應用方式)<BR>
              https://docs.mongodb.com/manual/core/replica-set-secondary/<BR>
              設定為priority 0的Secondary Host不能參與投票，也就是不能變為Primary，有三種應用方式(官方介紹)。<BR>
              1.Priority 0 Replica Set Members：應用於異地備援(Sandby)，https://docs.mongodb.com/manual/core/replica-set-priority-0-member/<BR>
              2.Hidden Replica Set Members：：應用於提供特定讀取用途，https://docs.mongodb.com/manual/core/replica-set-hidden-member/<BR>
              3.Delayed Replica Set Members：應用於固定備存晚於當前時間的應用，如故意延後備存保持60分鐘，假設現在是21:00，那該主機只保留20:00前的資料，這樣可用於保護這一小時間的人為錯誤操作。https://docs.mongodb.com/manual/core/replica-set-delayed-member/<BR>
            (三)Replica Set Arbiter<BR>
              https://docs.mongodb.com/manual/core/replica-set-arbiter/<BR>
              不要讓Primary or Secondary Host同時兼任仲裁者<BR>
              Arbiter不會留存資料<BR>
          二.Replica Set Deployment Architectures<BR>
            https://docs.mongodb.com/manual/core/replica-set-architectures/<BR>
            Deploy an Odd Number of Members<BR>
            A replica set can have up to 7 voting members.<BR>
            <B>In general, avoid deploying more than one arbiter per replica set.</B><BR>
            (一)Three Member Replica Sets<BR>
            https://docs.mongodb.com/manual/core/replica-set-architecture-three-members/<BR>
            The minimum number of replica set members needed to obtain the benefits of a replica set is three members(最少要三個)<BR>
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          mongoDB(Ubutun) study<BR>
          Replication Testing<BR>
        </div>
        <div class="col py-3 border bg-light">
          一、準備三台環境,並各自驗證成功<BR>
            1.準備相關設定:用同一台Linux主機，用三個Port模擬RS三台，並準備相關的設定檔,資料庫檔,log檔<BR>
              192.168.0.34 27111 ==> config:/etc/mongod-rs1-p1.conf, db:/var/lib/mongodb-rs1-p1, log:/var/log/mongodb<BR>
              192.168.0.34 27112 ==> config:/etc/mongod-rs1-s1.conf, db:/var/lib/mongodb-rs1-s1, log:/var/log/mongodb<BR>
              192.168.0.34 27113 ==> config:/etc/mongod-rs1-s2.conf, db:/var/lib/mongodb-rs1-s2, log:/var/log/mongodb<BR>
            2.修改設定檔(先備份)<BR>
              將上述三個設定檔,分別調整相關環境參數<BR>
              (1)storage.dbPath: /var/lib/mongodb-rs1-p1<BR>
              (2)net.port: 27111<BR>
              (3)net.bindIp: 將實體ip加入,方便等會跨主機發動Insert(如果沒有跨主機,是不用加)<BR>
            3.主機驗證<BR>
              (1)啟動服務(&:加入背景): sudo mongod --config /etc/mongod-rs1-p1.conf &<BR>
              (2)確認是否真的登入該主機: sudo tail -f /var/log/mongodb<BR>
              (3)新增一筆<BR>
              sudo mongod --host 192.168.0.34 --port 27111<BR>
              db.collection.insert({"x":1})<BR>
        </div>
      </div>
      <div class="row">
        <div class="col-3 py-3 border bg-light">
          Linux 常用指令<BR>
        </div>
        <div class="col py-3 border bg-light">
          1.放入背景 + &<BR>
            Ex: sudo mongod /etc/mongod-rs1-p1.conf &<BR>
          2.jobs : 觀察有哪些背景服務<BR>
          3.fg %5 : 將第5個背景服務放到前景<BR>
          4.Ctrl+Z : 暫停進入背景<BR>
          5.bg %5 : 重新執行背景服務<BR>
          6.kill %5 : 刪除背景服務(PS ubutun試驗無效)<BR>
          7.nohup : 強制背景服務<BR>
        </div>
      </div>
    </div>

 






    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>
